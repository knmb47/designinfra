# 基本要素

インフラストラクチャダイアグラムの基本要素を解説します。代表的なものをリストアップすると以下になります。

* ゾーン
  * ゾーン境界
* ロケーション
* ノード
  * テクニカルノード
  * ストレージ
* プロセス
* コネクション
* アクター

今後の投稿で具体的な解説しますが、ここでは概要レベルで要素の説明をしていきます。注意事項として、Amazon Web ServiceやAzure等などのクラウドサービスで使われる定義とは少々違います。当然ながら概念として重なる部分もありつつ、実装上の味付けがあります。筆者が理解する範囲で、その辺りの補足もしておきます。

## ゾーン

図の上でゾーンはノードを入れる大きな枠として記述します。ゾーンは非機能要件の分類を意味し、ゾーンの枠は非機能要件の境界を意味します。非機能要件の分かりやすい例えは、トラディショナルなセキュリティ確保水準での分類です。セキュリティという非機能要件では、「制御不能ゾーン」>「制御ゾーン」>「制限ゾーン」>「安全ゾーン」>「保護ゾーン」などでデータ保存時のセキュリティ確保水準を分けるかもしれません。

設計の過程で、これから作るシステムのアーキテクチャを形作るにあたり、設計図の枠に物理的な建物や部屋を書いてから始めるのはお奨めできません。それらは別で説明するロケーションで考慮します。システムが満たそうとする非機能要件を整理し、確保する単位で決定を行っていく必要がありますので、まずはゾーンから始めることになります。

クラウドサービスで出てくる「アベイラビリティゾーン」は、「データセンター」を超えて「可用性（アベイラビリティ）」の担保を目標とする機能を備えたゾーンということです。AWSのページを見ていると、昨今のコンピューティングの利用ニーズに合わせて、「Wavelength」「ローカルゾーン」というデバイスとの通信レイテンシに着目したゾーン定義も増えているようですね。

非機能要件として、セキュリティと可用性のゾーンを紹介しました。同じシステムを別の非機能の尺度でみる場合、ゾーンの区分けも異なり、見た目が違う（ビューが違う）結果になります。


### ゾーン境界

ゾーン同士が接し合うところを検討します。非機能要件の違うゾーンが接するため壁が必要になります。

非機能要件の違いを感覚的に説明するために、ゾーンが水槽だと思い、非機能要件を水の温度だと思って下さい。設計者としてはゾーン内部の非機能要件＝温度は一定に保ちたいものです。温水ゾーンと冷水ゾーンの間に境界があり、そこが有機素材の半透膜でつながっていたら、熱エネルギーの交換が簡単に行われて、温水も冷水もぬるくなってしまいます。それぞれのゾーンに設定した温度の維持は難しくなります。この例では、断熱壁を設計することになります。

全く連動がないゾーンの間は断絶するような仕掛けで良いのですが、互いのゾーンにそれぞれ属するノードが通信をする際には、ゾーン境界をどのように設計するか検討することになります。


## ロケーション

ロケーションは「具体的な場所」を意味します。データセンターの何階のROOM1等の名前がつけられる具体的な場所です。物理的なセキュリティ保護や地政学上のリスク等、すべての非機能の組み合わせがセットになったシステム設計上の制約です。

クラウドサービスでいう「リージョン名」や「アベイラビリティゾーン番号」は、かなりざっくりな「ロケーション」の例です。ここで、ゾーンとロケーションがごっちゃになってきたと思うかもしれません。「ゾーン」の定義は物理的な概念である「ロケーション」から切り離されていたいところです。クラウドサービスでは、リージョン（特定地域）の中にアベイラビリティゾーンを実現してます。一般的に我々がクラウドサービスを使用するときに使っているアベイラビリティゾーンの認識は、アベイラビリティーゾーン定義が特定のリージョン内に実装された実体になります。ゾーンと呼ばれていても物理実体があり、リファレンス番号や名前がついているものはロケーションです。

## ノード

コンピューティングの計算ロジックの実行を管理する単位です。ノイマン型コンピュータ・アーキテクチャを構成する論理的な単位です。

今日はここまで…。





