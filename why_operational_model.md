# 基盤のアーキテクチャが必要な理由

ノードを分離しないで良いなら、それに越したことはないのです。

## 最もシンプルなコンピュータ

コンピュータの名前で販売され最もシンプルなオペレーショナル・モデリングで使われた有名なコンピュータシステムがあります。[ファミコン](https://ja.wikipedia.org/wiki/%E3%83%95%E3%82%A1%E3%83%9F%E3%83%AA%E3%83%BC%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF)です。正式名称は、ファミリーコンピュータです。

ファミコンの利用シーンをアーキテクチャ図で表すと次のようになります。

![image](https://user-images.githubusercontent.com/122523246/213143399-f427e45a-1361-464a-911f-07651b4ed15c.png)

描く必要もないくらい単純です。

これは「全機能が１つのノード、１つのプロセスで賄えるのであれば、システムを複数のノードに分解する必要はない。」という示唆です。
そして、何も非機能要件がないのであれば、これで完結します。単体で動くファミコンやゲーム機をお持ちで「二台持っているよ」という人はいらっしゃいますでしょうか。ネットワーク通信ができる話を前提にしていませんから、二台ある理由は二人で別々に使うためでしょうか。

## 非機能要件の登場

それも家族で奪い合わないため…という非機能要件かもしれません。もうちょっとシステム屋っぽい話で非機能要件を持ち出すと、ユーザーは、極度のゲーマーで家に予備機が必要という場合です。

![image](https://user-images.githubusercontent.com/122523246/213146039-26a2f3bd-d110-494b-b00e-f2ca5786305b.png)

普段用が壊れたら予備機に切り替えが可能です。壊れてから新しいものをお店に買いに行ったら、半日は掛かってしまうでしょう。予備機を家に確保しておけば、トラブル対応の時間は、カセットの差し替えと繋ぎ変えだけです。ゲームを楽しむシステムとしての非機能要件たる[MTTR (Mean Time To Recover)](https://ja.wikipedia.org/wiki/%E5%B9%B3%E5%9D%87%E4%BF%AE%E5%BE%A9%E6%99%82%E9%96%93)は、半日(4時間)から10分に改善されました。(ファミコンの機体のMTTRではありません。)

## インフラ設計だけが非機能要件を満たすか

このようにインフラ設計は、非機能要件と密接に関わります。多くの非機能要件の検討がインフラ設計と関係します。但し、非機能要件の検討とインフラ設計を一緒に扱ってはいけません。

実は、ここが基盤のアーキテクトなる存在がレゾンデートルを主張するエリアです。

わかりやすい非機能要件の例として「レスポンスタイムを良くしたい。」を例にだしましょう。基盤エリアであるハードウェアを増強したり、高速なネットワークでデータのアクセス速度を早めたり、レスポンスタイムの改善は、インフラ設計と関わる部分もあります。ですが、取りうる手はそれだけでは有りません。ダサいアルゴリズムで作られた機能を改善する方が何百倍・何千倍も早くなるかもしれません。さらに悩ましいのは、機能改善を行わずに、インフラ設計でキャッシュの配置を行えば、これまた何百倍も何千倍も改善しちゃうケースもあることです。両方を対応すれば、何万倍・何百万倍も早くなるのに、片方しか見ないのは残念な発想です。では、全部やればいいのでしょうか。

アーキテクトが考える問題は「全部やればいい」という単純な解が取り得ないためです。「予算が無尽蔵にあるので全部やろう」は空想の世界でなら存在可能でアーキテクトは不要ですが、現実世界はそうは行きません。

「機器のレベルでのスピードの担保」、「開発されてきたシステムプログラム」、「オペレーショナル配置の検討の最適な組み合わせ」を **「予算や期限の範囲内」** で実現可能に組み合わせることが求められます。

今回は、解説を書いていく前段として「なんで、こんなお絵描きをするんだっけ？」を解説してみました。
